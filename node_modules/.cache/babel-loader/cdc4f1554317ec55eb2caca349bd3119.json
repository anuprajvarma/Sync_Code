{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anupraj/Documents/Sync_Code/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/anupraj/Documents/Sync_Code/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useRef}from'react';import Codemirror from'codemirror';import'codemirror/lib/codemirror.css';import'codemirror/theme/dracula.css';import'codemirror/mode/javascript/javascript';import'codemirror/addon/edit/closetag';import'codemirror/addon/edit/closebrackets';import{jsx as _jsx}from\"react/jsx-runtime\";var Editor=function Editor(_ref){var socketRef=_ref.socketRef,roomId=_ref.roomId,onCodeChange=_ref.onCodeChange;var editorRef=useRef(null);useEffect(function(){function init(){return _init.apply(this,arguments);}function _init(){_init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:editorRef.current=Codemirror.fromTextArea(document.getElementById('realtimeEditor'),{mode:{name:'javascript',json:true},theme:'dracula',autoCloseBrackets:true,autoCloseTags:true,lineNumbers:true});editorRef.current.on('change',function(instance,changes){//console.log('changes',changes)\nvar origin=changes.origin;var code=instance.getValue();onCodeChange(code);if(origin!=='setValue'){socketRef.current.emit('codeChange',{roomId:roomId,code:code});}});case 2:case\"end\":return _context.stop();}}},_callee);}));return _init.apply(this,arguments);}init();},[]);useEffect(function(){if(socketRef.current){socketRef.current.on('codeChange',function(_ref2){var code=_ref2.code;console.log('receving',code);if(code!==null){editorRef.current.setValue(code);}});}},[socketRef.current]);return/*#__PURE__*/_jsx(\"textarea\",{id:\"realtimeEditor\"});};export default Editor;","map":{"version":3,"names":["React","useEffect","useRef","Codemirror","Editor","socketRef","roomId","onCodeChange","editorRef","init","current","fromTextArea","document","getElementById","mode","name","json","theme","autoCloseBrackets","autoCloseTags","lineNumbers","on","instance","changes","origin","code","getValue","emit","console","log","setValue"],"sources":["/Users/anupraj/Documents/Sync_Code/src/components/Editor.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react'\nimport Codemirror from 'codemirror';\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/dracula.css';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/addon/edit/closetag';\nimport 'codemirror/addon/edit/closebrackets';\n\nconst Editor = ({socketRef,roomId, onCodeChange}) => {\n\n    const editorRef = useRef(null);\n\n    useEffect(()=>{\n        async function init(){\n            editorRef.current = Codemirror.fromTextArea(document.getElementById('realtimeEditor'),{\n                mode: {name: 'javascript' , json: true},\n                theme: 'dracula',\n                autoCloseBrackets: true,\n                autoCloseTags: true,\n                lineNumbers: true,\n            })\n\n            editorRef.current.on('change',(instance,changes)=>{\n                //console.log('changes',changes)\n                const {origin}= changes;\n                const code = instance.getValue();\n                onCodeChange(code)\n                if(origin!=='setValue'){\n                    socketRef.current.emit('codeChange',{\n                        roomId,\n                        code,\n                    })\n                } \n            });\n        }\n        init();\n    },[]);\n\n    useEffect(()=>{\n        if(socketRef.current){\n            socketRef.current.on('codeChange',({code})=>{\n                console.log('receving',code)\n                if(code!==null){\n                    editorRef.current.setValue(code);\n                }\n            })\n        }\n    },[socketRef.current])\n\n    return (\n        <textarea id='realtimeEditor'></textarea>\n    )\n}\n\nexport default Editor\n"],"mappings":"gQAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,KAAyC,OAAzC,CACA,MAAOC,WAAP,KAAuB,YAAvB,CACA,MAAO,+BAAP,CACA,MAAO,8BAAP,CACA,MAAO,uCAAP,CACA,MAAO,gCAAP,CACA,MAAO,qCAAP,C,2CAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,MAAsC,IAApCC,UAAoC,MAApCA,SAAoC,CAA1BC,MAA0B,MAA1BA,MAA0B,CAAlBC,YAAkB,MAAlBA,YAAkB,CAEjD,GAAMC,UAAS,CAAGN,MAAM,CAAC,IAAD,CAAxB,CAEAD,SAAS,CAAC,UAAI,SACKQ,KADL,wHACV,qIACID,SAAS,CAACE,OAAV,CAAoBP,UAAU,CAACQ,YAAX,CAAwBC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAAxB,CAAkE,CAClFC,IAAI,CAAE,CAACC,IAAI,CAAE,YAAP,CAAsBC,IAAI,CAAE,IAA5B,CAD4E,CAElFC,KAAK,CAAE,SAF2E,CAGlFC,iBAAiB,CAAE,IAH+D,CAIlFC,aAAa,CAAE,IAJmE,CAKlFC,WAAW,CAAE,IALqE,CAAlE,CAApB,CAQAZ,SAAS,CAACE,OAAV,CAAkBW,EAAlB,CAAqB,QAArB,CAA8B,SAACC,QAAD,CAAUC,OAAV,CAAoB,CAC9C;AACA,GAAOC,OAAP,CAAgBD,OAAhB,CAAOC,MAAP,CACA,GAAMC,KAAI,CAAGH,QAAQ,CAACI,QAAT,EAAb,CACAnB,YAAY,CAACkB,IAAD,CAAZ,CACA,GAAGD,MAAM,GAAG,UAAZ,CAAuB,CACnBnB,SAAS,CAACK,OAAV,CAAkBiB,IAAlB,CAAuB,YAAvB,CAAoC,CAChCrB,MAAM,CAANA,MADgC,CAEhCmB,IAAI,CAAJA,IAFgC,CAApC,EAIH,CACJ,CAXD,EATJ,sDADU,uCAuBVhB,IAAI,GACP,CAxBQ,CAwBP,EAxBO,CAAT,CA0BAR,SAAS,CAAC,UAAI,CACV,GAAGI,SAAS,CAACK,OAAb,CAAqB,CACjBL,SAAS,CAACK,OAAV,CAAkBW,EAAlB,CAAqB,YAArB,CAAkC,eAAU,IAARI,KAAQ,OAARA,IAAQ,CACxCG,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAuBJ,IAAvB,EACA,GAAGA,IAAI,GAAG,IAAV,CAAe,CACXjB,SAAS,CAACE,OAAV,CAAkBoB,QAAlB,CAA2BL,IAA3B,EACH,CACJ,CALD,EAMH,CACJ,CATQ,CASP,CAACpB,SAAS,CAACK,OAAX,CATO,CAAT,CAWA,mBACI,iBAAU,EAAE,CAAC,gBAAb,EADJ,CAGH,CA5CD,CA8CA,cAAeN,OAAf"},"metadata":{},"sourceType":"module"}